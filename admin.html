<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Mulish', sans-serif; padding: 30px; background: #f4f7f9; }
        table { width: 100%; border-collapse: collapse; background: white; }
        th, td { padding: 15px; border-bottom: 1px solid #eee; text-align: left; }
        th { background: #3395ff; color: white; }
        img { width: 60px; height: 60px; object-fit: cover; border-radius: 4px; }
    </style>
</head>
<body>
    <h2>KYC Submissions (Live)</h2>
    <table>
        <thead><tr><th>Photo</th><th>Location</th><th>Time</th></tr></thead>
        <tbody id="list"></tbody>
    </table>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = { /* SAME AS ABOVE */ };
        firebase.initializeApp(firebaseConfig);
        firebase.firestore().collection("kyc_submissions").orderBy("time", "desc").onSnapshot(s => {
            const tbody = document.getElementById('list'); tbody.innerHTML = "";
            s.forEach(d => {
                const data = d.data();
                tbody.innerHTML += `<tr>
                    <td><a href="${data.photo}" target="_blank"><img src="${data.photo}"></a></td>
                    <td><a href="https://www.google.com/maps?q=${data.lat},${data.lon}" target="_blank">üìç View Map</a></td>
                    <td>${data.time ? data.time.toDate().toLocaleString() : '...'}</td>
                </tr>`;
            });
        });
    </script>
</body>
</html>
