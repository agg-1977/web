<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ffffff">
    <title>Ashok Jewellers | Classic</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. ROYAL THEME --- */
        :root {
            --primary: #B8860B; /* Dark Gold */
            --bg-color: #f9f9f9; /* Off White */
            --card-bg: #ffffff;
            --text-dark: #333333;
            --text-light: #777777;
            --shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-family: 'Lato', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- 2. HEADER --- */
        header {
            background: #fff;
            padding: 15px 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky; top: 0; z-index: 100;
        }
        .logo { 
            font-family: 'Cinzel', serif; font-weight: 700; font-size: 1.4rem; color: var(--text-dark); letter-spacing: 2px;
        }
        .subtitle { font-size: 0.7rem; color: var(--primary); text-transform: uppercase; letter-spacing: 3px; margin-top: 5px; }

        /* --- 3. TICKER --- */
        .ticker-wrap {
            background: var(--primary); color: white;
            font-size: 0.75rem; padding: 8px 0;
            overflow: hidden; white-space: nowrap;
        }
        .ticker-content { display: inline-block; animation: scroll 20s linear infinite; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }

        /* --- 4. LAYOUT --- */
        .container { padding: 20px 20px 100px 20px; }

        .section-title {
            font-family: 'Cinzel', serif;
            color: var(--text-dark);
            font-size: 1.1rem;
            margin: 30px 0 15px 0;
            border-left: 3px solid var(--primary);
            padding-left: 10px;
        }

        /* --- 5. CARDS --- */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            border: 1px solid #eee;
        }

        /* Rate Rows */
        .rate-row {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #f0f0f0;
            padding: 15px 0;
        }
        .rate-row:last-child { border-bottom: none; }
        
        .rate-name { font-size: 1rem; color: var(--text-dark); font-weight: 600; }
        .rate-val { font-size: 1.3rem; color: var(--primary); font-family: 'Cinzel', serif; font-weight: 700; }
        .rate-unit { font-size: 0.7rem; color: var(--text-light); text-align: right; }

        /* Scheme Cards */
        .scheme-card {
            background: #fff; border-left: 4px solid var(--primary);
            padding: 20px; margin-bottom: 15px; border-radius: 8px;
            box-shadow: var(--shadow);
        }
        .scheme-title { font-weight: bold; font-size: 1.1rem; color: var(--primary); margin-bottom: 5px; font-family: 'Cinzel'; }
        
        /* Store Cards */
        .store-card {
            background: #fff; border-radius: 12px; overflow: hidden;
            margin-bottom: 20px; box-shadow: var(--shadow);
        }
        .store-info { padding: 20px; }
        .btn-outline {
            display: block; width: 100%; text-align: center;
            border: 1px solid var(--text-dark);
            background: transparent; color: var(--text-dark);
            padding: 12px; margin-top: 10px; border-radius: 6px;
            text-decoration: none; font-size: 0.9rem; font-weight: bold; cursor: pointer;
        }
        .btn-gold {
            background: var(--primary); border: none; color: white; border: 1px solid var(--primary);
        }

        /* --- 6. DASHBOARD STYLES (NEW) --- */
        .dash-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .dash-balance { font-size: 2rem; font-family: 'Cinzel'; color: var(--primary); font-weight: 700; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .stat-box { background: #f8f8f8; padding: 15px; border-radius: 8px; text-align: center; border: 1px solid #eee; }
        .stat-label { font-size: 0.7rem; color: #666; text-transform: uppercase; }
        .stat-val { font-size: 1.1rem; font-weight: bold; color: #333; margin-top: 5px; }

        /* --- 7. BOTTOM NAVIGATION --- */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: #fff; border-top: 1px solid #eee;
            display: flex; height: 70px;
            justify-content: space-around; align-items: center;
            z-index: 1000;
        }
        .nav-item { text-align: center; color: #ccc; flex: 1; }
        .nav-item i { font-size: 1.2rem; margin-bottom: 5px; display: block; }
        .nav-item span { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1px; }
        
        .nav-item.active { color: var(--primary); }

        /* --- UTILITIES --- */
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

        /* WhatsApp */
        .whatsapp {
            position: fixed; bottom: 85px; right: 20px;
            background: #25d366; color: white;
            width: 55px; height: 55px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            text-decoration: none; z-index: 99;
        }

    </style>
</head>
<body>

<header>
    <div class="logo">ASHOK JEWELLERS</div>
    <div class="subtitle">Since 1977</div>
</header>

<div class="ticker-wrap">
    <div class="ticker-content">
        <span>‚ö†Ô∏è Rates are subject to change based on market fluctuations.</span>
        <span style="margin-left: 50px;">‚ú® New Wedding Collection is now available in store!</span>
        <span style="margin-left: 50px;">üíé Call us to book a video consultation.</span>
    </div>
</div>

<div class="container">

    <div id="view-rates" class="fade-in">
        
        <div style="width: 100%; height: 160px; background: #333; border-radius: 12px; margin-bottom: 30px; overflow: hidden; position: relative;">
            <img src="https://images.unsplash.com/photo-1584302179602-e4c3d3fd629d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.7;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
                <h3 style="margin: 0; font-family: 'Cinzel'; letter-spacing: 2px;">Bridal Collection</h3>
                <p style="font-size: 0.8rem; margin-top: 5px;">View Catalogue</p>
            </div>
        </div>

        <div class="section-title">TODAY'S GOLD RATE</div>
        <div class="card">
            <div class="rate-row">
                <div class="rate-name">24K Pure Gold</div>
                <div>
                    <div class="rate-val" id="val-gold23">--</div>
                    <div class="rate-unit">per 10 gram</div>
                </div>
            </div>
            <div class="rate-row">
                <div class="rate-name">22K Standard</div>
                <div>
                    <div class="rate-val" id="val-gold22">--</div>
                    <div class="rate-unit">per 10 gram</div>
                </div>
            </div>
            <div class="rate-row">
                <div class="rate-name">18K Rose Gold</div>
                <div>
                    <div class="rate-val" id="val-gold18">--</div>
                    <div class="rate-unit">per 10 gram</div>
                </div>
            </div>
        </div>

        <div class="section-title">TODAY'S SILVER RATE</div>
        <div class="card">
            <div class="rate-row">
                <div class="rate-name">999 Fine Silver</div>
                <div>
                    <div class="rate-val" style="color: #666;" id="val-silver">--</div>
                    <div class="rate-unit">per 1 kg</div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-schemes" class="hidden fade-in">
        <div class="section-title">GOLD SAVINGS</div>
        
        <div class="scheme-card">
            <div class="scheme-title">Swarna Sanchay</div>
            <p style="color: #666; font-size: 0.9rem; line-height: 1.5;">
                Pay monthly for 11 months and get the 12th month installment <b>FREE</b> from us.
            </p>
            <button class="btn-outline btn-gold" onclick="switchTab('view-profile', document.getElementById('nav-login'))">LOGIN TO PAY</button>
        </div>

        <div class="scheme-card">
            <div class="scheme-title">Silver SIP</div>
            <p style="color: #666; font-size: 0.9rem; line-height: 1.5;">
                Start investing in Silver with small amounts. Build your portfolio digitally.
            </p>
            <button class="btn-outline">START SIP</button>
        </div>
    </div>

    <div id="view-store" class="hidden fade-in">
        <div class="section-title">SELECT STORE</div>

        <div class="store-card">
            <div class="store-info">
                <h3 style="margin-top: 0; color: var(--primary);">Ashok Jewellers & Sons</h3>
                <p style="color: #666; font-size: 0.9rem;">Prithvi Chowk, Ring Rd, Shivaji Nagar,<br>Phaltan, Maharashtra</p>
                <div style="display: flex; gap: 10px;">
                    <a href="https://share.google/9nQhzrsJqLKP41ESC" target="_blank" class="btn-outline btn-gold">NAVIGATE</a>
                    <a href="tel:+919309383699" class="btn-outline">CALL</a>
                </div>
            </div>
        </div>

        <div class="store-card">
            <div class="store-info">
                <h3 style="margin-top: 0; color: var(--text-dark);">Ratna Jewellers</h3>
                <p style="color: #666; font-size: 0.9rem;">Near Ugdya Maruti Temple, Ravivar Peth,<br>Phaltan, Maharashtra</p>
                <div style="display: flex; gap: 10px;">
                    <a href="https://share.google/7BWYHRwcQv3JAu121" target="_blank" class="btn-outline btn-gold">NAVIGATE</a>
                    <a href="tel:+918766673377" class="btn-outline">CALL</a>
                </div>
            </div>
        </div>

        <div class="store-card">
            <div class="store-info">
                <h3 style="margin-top: 0; color: var(--text-dark);">Ashok Jewellers (Kolki)</h3>
                <p style="color: #666; font-size: 0.9rem;">Near Ambedkar Chowk, Phaltan Bus Stop Road,<br>Kolki, Phaltan</p>
                <div style="display: flex; gap: 10px;">
                    <a href="https://share.google/28nBwAcavzRYUo88M" target="_blank" class="btn-outline btn-gold">NAVIGATE</a>
                    <a href="tel:+919309383699" class="btn-outline">CALL</a>
                </div>
            </div>
        </div>
    </div>

    <div id="view-profile" class="hidden fade-in">
        
        <div id="login-section" class="card" style="text-align: center; padding: 40px 20px;">
            <i class="fas fa-user-shield" style="font-size: 3rem; color: var(--primary); margin-bottom: 20px;"></i>
            <h3>Secure Login</h3>
            <p style="color: #888; margin-bottom: 20px;">We will send a One Time Password (OTP) to your number.</p>
            
            <div id="step-phone">
                <input type="tel" id="phone-number" placeholder="+91 99999 99999" style="width: 100%; padding: 15px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 1.1rem; text-align: center;">
                <div id="recaptcha-container"></div>
                <button class="btn-outline btn-gold" onclick="sendOTP()">SEND OTP</button>
            </div>

            <div id="step-otp" class="hidden">
                <input type="number" id="otp-code" placeholder="123456" style="width: 100%; padding: 15px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 1.2rem; text-align: center; letter-spacing: 5px;">
                <button class="btn-outline btn-gold" onclick="verifyOTP()">VERIFY & LOGIN</button>
            </div>
        </div>

        <div id="dashboard-section" class="hidden">
            <div class="card" style="background: linear-gradient(135deg, #B8860B 0%, #d4af37 100%); color: white; border: none;">
                <div class="dash-header">
                    <span>Swarna Sanchay Account</span>
                    <i class="fas fa-crown"></i>
                </div>
                <div style="font-size: 0.8rem; opacity: 0.9;">Scheme Balance</div>
                <div class="dash-balance">‚Çπ 55,000</div>
                <div style="font-size: 0.8rem; margin-top: 10px;">Account: #AJ-99283</div>
            </div>

            <div class="section-title">MY STATS</div>
            <div class="card">
                <div class="stat-grid">
                    <div class="stat-box">
                        <div class="stat-label">Installments</div>
                        <div class="stat-val">8 / 11</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Next Due</div>
                        <div class="stat-val" style="color: #d32f2f;">15 Feb</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Gold Weight</div>
                        <div class="stat-val">7.2 gms</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Loyalty Pts</div>
                        <div class="stat-val" style="color: var(--primary);">450</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="rate-row">
                    <div class="rate-name"><i class="fas fa-history" style="color: #999; margin-right: 10px;"></i> Last Payment</div>
                    <div style="text-align: right;">
                        <div style="font-weight: bold;">‚Çπ 5,000</div>
                        <div style="font-size: 0.7rem; color: #999;">Jan 10, 2026</div>
                    </div>
                </div>
                <button class="btn-outline btn-gold" style="margin-top: 15px;">PAY NEXT INSTALLMENT</button>
            </div>
            
            <button class="btn-outline" onclick="logout()" style="color: #d32f2f; border-color: #d32f2f; margin-top: 20px;">LOGOUT</button>
        </div>

    </div>

</div>

<div class="bottom-nav">
    <div class="nav-item active" onclick="switchTab('view-rates', this)">
        <i class="fas fa-gem"></i>
        <span>Rates</span>
    </div>
    <div class="nav-item" onclick="switchTab('view-schemes', this)">
        <i class="fas fa-piggy-bank"></i>
        <span>Schemes</span>
    </div>
    <div class="nav-item" onclick="switchTab('view-store', this)">
        <i class="fas fa-map-marker-alt"></i>
        <span>Stores</span>
    </div>
    <div class="nav-item" id="nav-login" onclick="switchTab('view-profile', this)">
        <i class="fas fa-user"></i>
        <span>Login</span>
    </div>
</div>

<a href="https://wa.me/919309383699" class="whatsapp"><i class="fab fa-whatsapp"></i></a>

<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>

<script>
    // --- UI SWITCHING ---
    function switchTab(viewId, el) {
        document.getElementById('view-rates').classList.add('hidden');
        document.getElementById('view-schemes').classList.add('hidden');
        document.getElementById('view-store').classList.add('hidden');
        document.getElementById('view-profile').classList.add('hidden');
        
        document.getElementById(viewId).classList.remove('hidden');

        document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
        if(el) el.classList.add('active');
    }

    // --- FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyDP_W7py_geZGaD9Fwk34fE0bo1GLf6u40",
        authDomain: "ashokjewellers-1e5ab.firebaseapp.com",
        projectId: "ashokjewellers-1e5ab",
        storageBucket: "ashokjewellers-1e5ab.firebasestorage.app",
        messagingSenderId: "899077006882",
        appId: "1:899077006882:web:2fb75fd0d8f45c2df44c7b"
    };

    // Initialize Firebase
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.database();
    const auth = firebase.auth();
    auth.languageCode = 'en'; 

    // --- REALTIME RATES ---
    db.ref('rates').on('value', (snapshot) => {
        const data = snapshot.val();
        if(data) {
            ['gold23','gold22','gold18','silver'].forEach(k => {
                if(document.getElementById('val-'+k)) document.getElementById('val-'+k).innerText = data[k];
            });
        }
    });

    // --- LOGIN LOGIC (FIXED) ---
    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
        'size': 'invisible'
    });

    function sendOTP() {
        var phoneNumber = document.getElementById('phone-number').value;
        
        // --- THE FIX: AUTO-FORMAT NUMBER ---
        // 1. Remove spaces, dashes, or brackets
        phoneNumber = phoneNumber.replace(/\s+/g, '').replace(/-/g, '');
        
        // 2. Check if it starts with +91, if not, add it
        if (!phoneNumber.startsWith('+91')) {
            // If they typed 9199..., assume they meant +91
            if(phoneNumber.startsWith('91') && phoneNumber.length === 12) {
                phoneNumber = '+' + phoneNumber;
            } else {
                phoneNumber = '+91' + phoneNumber;
            }
        }
        
        console.log("Sending OTP to:", phoneNumber); // Debugging line

        const appVerifier = window.recaptchaVerifier;

        firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier)
            .then((confirmationResult) => {
                window.confirmationResult = confirmationResult;
                alert("OTP Sent to " + phoneNumber);
                document.getElementById('step-phone').classList.add('hidden');
                document.getElementById('step-otp').classList.remove('hidden');
            }).catch((error) => {
                console.error(error);
                alert("Error: " + error.message);
                // Reset captcha if error
                window.recaptchaVerifier.render().then(function(widgetId) {
                  grecaptcha.reset(widgetId);
                });
            });
    }

    function verifyOTP() {
        const code = document.getElementById('otp-code').value;
        window.confirmationResult.confirm(code).then((result) => {
            alert("Login Successful!");
            showDashboard();
        }).catch((error) => {
            alert("Incorrect OTP. Please try again.");
        });
    }

    function showDashboard() {
        document.getElementById('login-section').classList.add('hidden');
        document.getElementById('dashboard-section').classList.remove('hidden');
    }
    
    function logout() {
        auth.signOut();
        window.location.reload();
    }

    auth.onAuthStateChanged((user) => {
        if (user) {
            showDashboard();
        }
    });
</script>
</body>
</html>

